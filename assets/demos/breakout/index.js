!function(t){function e(e){for(var n,s,o=e[0],r=e[1],a=0,l=[];a<o.length;a++)s=o[a],Object.prototype.hasOwnProperty.call(i,s)&&i[s]&&l.push(i[s][0]),i[s]=0;for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n]);for(c&&c(e);l.length;)l.shift()()}var n={},i={0:0};var s={};var o={3:function(){return{"./index_bg.js":{__wbindgen_throw:function(t,e){return n[2].exports.c(t,e)}}}}};function r(e){if(n[e])return n[e].exports;var i=n[e]={i:e,l:!1,exports:{}};return t[e].call(i.exports,i,i.exports,r),i.l=!0,i.exports}r.e=function(t){var e=[],n=i[t];if(0!==n)if(n)e.push(n[2]);else{var a=new Promise((function(e,s){n=i[t]=[e,s]}));e.push(n[2]=a);var l,u=document.createElement("script");u.charset="utf-8",u.timeout=120,r.nc&&u.setAttribute("nonce",r.nc),u.src=function(t){return r.p+""+({}[t]||t)+".js"}(t);var c=new Error;l=function(e){u.onerror=u.onload=null,clearTimeout(h);var n=i[t];if(0!==n){if(n){var s=e&&("load"===e.type?"missing":e.type),o=e&&e.target&&e.target.src;c.message="Loading chunk "+t+" failed.\n("+s+": "+o+")",c.name="ChunkLoadError",c.type=s,c.request=o,n[1](c)}i[t]=void 0}};var h=setTimeout((function(){l({type:"timeout",target:u})}),12e4);u.onerror=u.onload=l,document.head.appendChild(u)}return({1:[3]}[t]||[]).forEach((function(t){var n=s[t];if(n)e.push(n);else{var i,a=o[t](),l=fetch(r.p+""+{3:"e12a1e05b621772a0764"}[t]+".module.wasm");if(a instanceof Promise&&"function"==typeof WebAssembly.compileStreaming)i=Promise.all([WebAssembly.compileStreaming(l),a]).then((function(t){return WebAssembly.instantiate(t[0],t[1])}));else if("function"==typeof WebAssembly.instantiateStreaming)i=WebAssembly.instantiateStreaming(l,a);else{i=l.then((function(t){return t.arrayBuffer()})).then((function(t){return WebAssembly.instantiate(t,a)}))}e.push(s[t]=i.then((function(e){return r.w[t]=(e.instance||e).exports})))}})),Promise.all(e)},r.m=t,r.c=n,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)r.d(n,i,function(e){return t[e]}.bind(null,i));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r.oe=function(t){throw console.error(t),t},r.w={};var a=window.webpackJsonp=window.webpackJsonp||[],l=a.push.bind(a);a.push=e,a=a.slice();for(var u=0;u<a.length;u++)e(a[u]);var c=l;r(r.s=0)}([function(t,e,n){const i=document.querySelector.bind(document);function s(t,e,n){this.state=t,this.x=-1,this.y=0,this.t=0,this.score=n,this.ctx=e,this.size=10,this.ended=!1,this.currentInput=0,this.input=0,this.cheat=!0,this.hardMode=!0,this.paddlePosition={x:0,y:0},this.ballPosition={x:0,y:0},this.lastBallPosition={x:-1,y:-1}}s.prototype.step=function(){this.state.step(this.input),this.x=this.state.get_x(),this.y=this.state.get_y(),this.t=this.state.get_t(),this.ended=this.state.is_ended()},s.prototype.debugRun=function(){for(;;)if(this.step(),this.ended)return},s.prototype.stepGame=function(){for(let t=0;t<2500;t++){if(this.step(),this.ended)return;if(this.x<0){0!==this.t&&(this.score.innerText=this.t);continue}const t=this.x*this.size,e=this.y*this.size,n=this.size;switch(this.t){case 0:this.ctx.clearRect(t,e,n,n);break;case 1:this.ctx.fillStyle="black",this.ctx.fillRect(t,e,n,n);break;case 2:this.ctx.fillStyle="green",this.ctx.fillRect(t,e,n,n);break;case 3:this.ctx.fillStyle="red",this.ctx.fillRect(t,e+n/4,n,n/2),this.paddlePosition={x:this.x,y:this.y};break;case 4:if(this.ctx.fillStyle="blue",this.ctx.beginPath(),this.ctx.ellipse(t+n/2,e+n/2,n/2,n/2,0,0,2*Math.PI),this.ctx.fill(),-1==this.lastBallPosition.y?this.lastBallPosition={x:this.x-1,y:this.y-1}:this.lastBallPosition=this.ballPosition,this.ballPosition={x:this.x,y:this.y},this.cheat)if(this.ballPosition.y<this.lastBallPosition.y)this.ballPosition.x>this.paddlePosition.x?this.input=1:this.ballPosition.x<this.paddlePosition.x?this.input=-1:this.input=0;else{const t=this.paddlePosition.y-1-this.ballPosition.y,e=this.ballPosition.x+(this.ballPosition.x-this.lastBallPosition.x)*t-this.paddlePosition.x;this.input=e>0?1:e<0?-1:0}else this.input=this.currentInput;return}}},s.prototype.runGame=function(){const t=this;this.keydown=e=>{switch(e.keyCode){case 37:t.currentInput=-1,t.input=-1;break;case 39:t.currentInput=1,t.input=1}},this.keyup=e=>{switch(e.keyCode){case 37:case 39:t.currentInput=0}},document.addEventListener("keydown",t.keydown),document.addEventListener("keyup",t.keyup);const e=i("#left");this.leftDown=e=>{t.currentInput=-1,t.input=-1,e.preventDefault(),e.stopPropagation()},this.leftUp=e=>{t.currentInput=0,e.preventDefault(),e.stopPropagation()},e&&(e.addEventListener("touchstart",this.leftDown),e.addEventListener("mousedown",this.leftDown),e.addEventListener("touchend",this.leftUp),e.addEventListener("mouseup",this.leftUp));const n=i("#right");return this.rightDown=e=>{t.currentInput=1,t.input=1,e.preventDefault(),e.stopPropagation()},this.rightUp=e=>{t.currentInput=0,e.preventDefault(),e.stopPropagation()},n&&(n.addEventListener("touchstart",this.rightDown),n.addEventListener("mousedown",this.rightDown),n.addEventListener("touchend",this.rightUp),n.addEventListener("mouseup",this.rightUp)),new Promise((i,s)=>{t.stepGame(),t.interval=setInterval(()=>{if(t.ended)return clearInterval(t.interval),document.removeEventListener("keydown",t.keydown),document.removeEventListener("keyup",t.keyup),e&&(e.removeEventListener("touchstart",t.leftDown),e.removeEventListener("mousedown",t.leftDown),e.removeEventListener("touchend",t.leftUp),e.removeEventListener("mouseup",t.leftUp)),n&&(n.removeEventListener("touchstart",t.rightDown),n.removeEventListener("mousedown",t.rightDown),n.removeEventListener("touchend",t.rightUp),n.removeEventListener("mouseup",t.rightUp)),void i();t.stepGame.call(t)},this.hardMode?20:250)})},(async()=>{const t=i("#score"),e=i("#canvas"),o=i("#cheat"),r=i("#hardmode"),a=e.getContext("2d"),l=i("#start"),u=i("#debug"),c=i("#left"),h=i("#right"),d=await n.e(1).then(n.bind(null,1)).catch(console.error);l.removeAttribute("disabled"),e.width=450,e.height=260;const p=t=>{t.preventDefault(),t.stopPropagation()};let f;c&&(c.addEventListener("click",p),c.addEventListener("dblclick",p)),h&&(h.addEventListener("click",p),h.addEventListener("dblclick",p)),l.addEventListener("click",()=>{l.setAttribute("disabled","true"),f=new s(d.MutState.new_pong(),a,t),f.cheat=o.checked,f.hardMode=r.checked,t.innerText="0",a.clearRect(0,0,e.width,e.height),f.runGame().then(()=>l.removeAttribute("disabled")).catch(console.log.bind(console))}),u&&u.addEventListener("click",()=>{u.setAttribute("disabled","true");let e=0,n=0;const i=Date.now();let o=0;const r=()=>{const l=performance.now(),c=new s(d.MutState.new_pong(),a,t),h=performance.now()-l;c.debugRun(),n+=performance.now()-h-l,e+=h,t.innerText=`Completed ${o+1}/10 in ${Date.now()-i}ms total`,10==++o?(t.innerText=10*n/10+"ms",u.removeAttribute("disabled")):setTimeout(r,100)};r()})})()}]);