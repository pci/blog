!function(t){function e(e){for(var i,s,o=e[0],r=e[1],a=0,l=[];a<o.length;a++)s=o[a],Object.prototype.hasOwnProperty.call(n,s)&&n[s]&&l.push(n[s][0]),n[s]=0;for(i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i]);for(u&&u(e);l.length;)l.shift()()}var i={},n={0:0};var s={};var o={3:function(){return{"./index_bg.js":{__wbindgen_throw:function(t,e){return i[2].exports.c(t,e)}}}}};function r(e){if(i[e])return i[e].exports;var n=i[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,r),n.l=!0,n.exports}r.e=function(t){var e=[],i=n[t];if(0!==i)if(i)e.push(i[2]);else{var a=new Promise((function(e,s){i=n[t]=[e,s]}));e.push(i[2]=a);var l,c=document.createElement("script");c.charset="utf-8",c.timeout=120,r.nc&&c.setAttribute("nonce",r.nc),c.src=function(t){return r.p+""+({}[t]||t)+".js"}(t);var u=new Error;l=function(e){c.onerror=c.onload=null,clearTimeout(h);var i=n[t];if(0!==i){if(i){var s=e&&("load"===e.type?"missing":e.type),o=e&&e.target&&e.target.src;u.message="Loading chunk "+t+" failed.\n("+s+": "+o+")",u.name="ChunkLoadError",u.type=s,u.request=o,i[1](u)}n[t]=void 0}};var h=setTimeout((function(){l({type:"timeout",target:c})}),12e4);c.onerror=c.onload=l,document.head.appendChild(c)}return({1:[3]}[t]||[]).forEach((function(t){var i=s[t];if(i)e.push(i);else{var n,a=o[t](),l=fetch(r.p+""+{3:"e12a1e05b621772a0764"}[t]+".module.wasm");if(a instanceof Promise&&"function"==typeof WebAssembly.compileStreaming)n=Promise.all([WebAssembly.compileStreaming(l),a]).then((function(t){return WebAssembly.instantiate(t[0],t[1])}));else if("function"==typeof WebAssembly.instantiateStreaming)n=WebAssembly.instantiateStreaming(l,a);else{n=l.then((function(t){return t.arrayBuffer()})).then((function(t){return WebAssembly.instantiate(t,a)}))}e.push(s[t]=n.then((function(e){return r.w[t]=(e.instance||e).exports})))}})),Promise.all(e)},r.m=t,r.c=i,r.d=function(t,e,i){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(r.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)r.d(i,n,function(e){return t[e]}.bind(null,n));return i},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r.oe=function(t){throw console.error(t),t},r.w={};var a=window.webpackJsonp=window.webpackJsonp||[],l=a.push.bind(a);a.push=e,a=a.slice();for(var c=0;c<a.length;c++)e(a[c]);var u=l;r(r.s=0)}([function(t,e,i){const n=document.querySelector.bind(document);function s(t,e,i){this.state=t,this.x=-1,this.y=0,this.t=0,this.score=i,this.ctx=e,this.size=10,this.ended=!1,this.currentInput=0,this.input=0,this.cheat=!0,this.hardMode=!0,this.paddlePosition={x:0,y:0},this.ballPosition={x:0,y:0},this.lastBallPosition={x:-1,y:-1}}s.prototype.step=function(){this.state.step(this.input),this.x=this.state.get_x(),this.y=this.state.get_y(),this.t=this.state.get_t(),this.ended=this.state.is_ended()},s.prototype.debugRun=function(){for(;;)if(this.step(),this.ended)return},s.prototype.stepGame=function(){for(let t=0;t<2500;t++){if(this.step(),this.ended)return;if(this.x<0){0!==this.t&&(this.score.innerText=this.t);continue}const t=this.x*this.size,e=this.y*this.size,i=this.size;switch(this.t){case 0:this.ctx.clearRect(t,e,i,i);break;case 1:this.ctx.fillStyle="black",this.ctx.fillRect(t,e,i,i);break;case 2:this.ctx.fillStyle="green",this.ctx.fillRect(t,e,i,i);break;case 3:this.ctx.fillStyle="red",this.ctx.fillRect(t,e+i/4,i,i/2),this.paddlePosition={x:this.x,y:this.y};break;case 4:if(this.ctx.fillStyle="blue",this.ctx.beginPath(),this.ctx.ellipse(t+i/2,e+i/2,i/2,i/2,0,0,2*Math.PI),this.ctx.fill(),-1==this.lastBallPosition.y?this.lastBallPosition={x:this.x-1,y:this.y-1}:this.lastBallPosition=this.ballPosition,this.ballPosition={x:this.x,y:this.y},this.cheat)if(this.ballPosition.y<this.lastBallPosition.y)this.ballPosition.x>this.paddlePosition.x?this.input=1:this.ballPosition.x<this.paddlePosition.x?this.input=-1:this.input=0;else{const t=this.paddlePosition.y-1-this.ballPosition.y,e=this.ballPosition.x+(this.ballPosition.x-this.lastBallPosition.x)*t-this.paddlePosition.x;this.input=e>0?1:e<0?-1:0}else this.input=this.currentInput;return}}},s.prototype.runGame=function(){const t=this;return this.keydown=e=>{switch(e.keyCode){case 37:t.currentInput=-1,t.input=-1;break;case 39:t.currentInput=1,t.input=1}},this.keyup=e=>{switch(e.keyCode){case 37:case 39:t.currentInput=0}},document.addEventListener("keydown",t.keydown),document.addEventListener("keyup",t.keyup),new Promise((e,i)=>{t.stepGame(),t.interval=setInterval(()=>{if(t.ended)return clearInterval(t.interval),document.removeEventListener("keydown",t.keydown),document.removeEventListener("keyup",t.keyup),void e();t.stepGame.call(t)},this.hardMode?20:250)})},(async()=>{const t=n("#score"),e=n("#canvas"),o=n("#cheat"),r=n("#hardmode"),a=e.getContext("2d"),l=n("#start"),c=n("#debug"),u=await i.e(1).then(i.bind(null,1)).catch(console.error);let h;l.removeAttribute("disabled"),l.addEventListener("click",()=>{l.setAttribute("disabled","true"),h=new s(u.MutState.new_pong(),a,t),h.cheat=o.checked,h.hardMode=r.checked,t.innerText="0",a.clearRect(0,0,e.width,e.height),h.runGame().then(()=>l.removeAttribute("disabled")).catch(console.log.bind(console))}),c&&c.addEventListener("click",()=>{c.setAttribute("disabled","true");let e=0,i=0;const n=Date.now();let o=0;const r=()=>{const l=performance.now(),h=new s(u.MutState.new_pong(),a,t),d=performance.now()-l;h.debugRun(),i+=performance.now()-d-l,e+=d,t.innerText=`Completed ${o+1}/10 in ${Date.now()-n}ms total`,10==++o?(t.innerText=10*i/10+"ms",c.removeAttribute("disabled")):setTimeout(r,100)};r()})})()}]);