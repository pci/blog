---
layout: post
title: Web Workers and drive by CPU nabbing
date: 2011-07-04 20:41:15.000000000 +01:00
categories:
- Javascript
tags:
- CPU
- html5
- Javascript
- Web Workers
status: publish
type: post
published: true
meta:
  _edit_last: '1'
comments: true
---
<p><a href="http://www.html5rocks.com/en/tutorials/workers/basics/" target="_blank">Web workers</a> are a great part of the html5 specification. They let you run a javascript program in a separate process; so that complex tasks can be done in the background without blocking nice, fluffy, user interactions with the page. Better still, if multiple web workers are run and multiple CPUs are available then they get scheduled across all the processor - multi-core javascript enables whole new avenues of complex (and awesome) code to be written and deliver a great experience.</p>
<p>....you can probably sense the but coming.....but - this means any page you navigate to, any link you click, any random website with funny pictures of cats on, has unfettered access to your CPU. While you browse worldsfunniestcats.com, it could be using your electricity to generate <a href="http://www.bitcoin.org/" target="_blank">BitCoins</a> for itself, or <a href="http://en.wikipedia.org/wiki/Password_cracking" target="_blank">crack passwords</a>.</p>
<p style="text-align: left;">To prove a point, below is a page that spawns a few web workers and sets them, continuously, generating prime numbers. Open up the page in a modern browser and check out your task manager (closing the page kill the web workers):</p>
<p style="text-align: left;"><a title="Eric - the CPU stealing cat" href="http://hacks.philingrey.com/CPU_Steal/" target="_blank"><img class="aligncenter size-full wp-image-107" title="CPU_Steal" src="/images/old_blog/CPU_Steal.jpg" alt="" width="488" height="454" /></a></p>
<p><strong>Update:</strong> It doesn't max-out the CPU in <a href="http://www.opera.com" target="_blank">Opera</a>...why? Because apparently Opera is so fast that it can handle the workload without breaking a sweat!</p>
<p><strong>Update 2:</strong> Apparently IE10 can hack it too, looks like firefox and chrome are trailing on this..... there's a sentence I never thought I'd write.....</p>
<p><strong>Update 3:</strong> On further investigation, it looks like Opera's performance is a combination of running the script at great speed AND some kind of limits on web workers, either in terms of number or CPU usage. I can't comment on IE10's performance as I don't have a windows 7 laptop..... if anyone is listening at microsoft..... *hint* *hint* :)</p>
